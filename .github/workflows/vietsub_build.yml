# This is a basic workflow to help you get started with Actions

name: vietsub_build

on:
  workflow_dispatch:
  watch:
    types: [started]
    
env:              
  ROM_URL: 'https://bigota.d.miui.com/21.11.17/miui_BEGONIA_21.11.17_c05ad0fe41_11.0.zip'
  Zip_name: 'MIUI_VietSub_BEGONIA_21.11.17_c05ad0fe41_11.0.zip'
  
jobs:
  build:
    runs-on: ubuntu-latest

    steps:
       - name: Checkout
         uses: actions/checkout@main
       
       - name: Clean Up
         run: |       
           docker rmi `docker images -q`
           sudo rm -rf /usr/share/dotnet /etc/mysql /etc/php /etc/apt/sources.list.d
           sudo -E apt-get update
           sudo -E apt-get -y autoremove --purge
           sudo -E apt-get clean
           df -h
           
       - name: Setting up the SPICES
         run: |
            sudo apt-get install -y git wget git zip unzip img2simg
       - name: Cloning...
         run: |
             git clone -b action https://github.com/buihien224/MIUI_VIETSUB.git $GITHUB_WORKSPACE/MIUI_VIETSUB
           
       - name: Download zip... and run
         run: |
            cd $GITHUB_WORKSPACE/MIUI_VIETSUB
            chmod +x download.sh
            chmod +x bhlnk.sh
            sudo bash download.sh $ROM_URL 
            mv MIUI_VIETSUB.zip $GITHUB_WORKSPACE/$Zip_name
       - name: Upload to gdrive
         uses: adityak74/google-drive-upload-git-action@main
         with:
           credentials: eyAidHlwZSI6ICJzZXJ2aWNlX2FjY291bnQiLCAicHJvamVjdF9pZCI6ICJwcm9wYW5lLWF0cml1bS0zMjY0MjMiLCAicHJpdmF0ZV9rZXlfaWQiOiAiMjAyMzg1ZTgzMDhhNGY1Y2FiYzg4YWE2MGQ2YTE2MmQ2ODA1MmE1MiIsICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS1cbk1JSUV2QUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktZd2dnU2lBZ0VBQW9JQkFRQzFoaCt6TTMxTU1IKytcbktxWW4rTzl3OElvaGZCakpMWTUwdFZ0SFdKcUVWemNUV0VPOG55RFRWS3hyOFhOVWNWZmJxZjdBNjNJYytQSklcblhGYzFuZlBScGtza04rRUlsQjZRYWlRYmVoVkltOElIaXBiZ1BHNHcyeTlnQVBRVktYYkhpMEtNRTh6R2lnemZcbnNXd21tblo0RDMwY2ZpMTZqMEZNL0FNakJGUXFBSkJuTmRFRDUrTm0rZ3IzcUtFN2lzY1lKNDEyUTFRQ0xlalJcbk43cEZFcDl5ZVBaNDA2bEtWWGFxQ3Vid00rQzhJa251NCs5SlJQTjEvek1WWVFaTGJTTngySWYxbVBTcjZHejJcbnp1Wm0yWHBvUUtaM1ptUURTbVgwNGI4RGQ5RTRWWEhlLzhNZGNkUXRPS0RrVU5LbmI3TU9neURqMXFMWi9Na1dcbktpdG1vOVROQWdNQkFBRUNnZ0VBR0dQT3dKVHJnZldHUkhhVjRBc1BubHpZMThwRkhrclR1RDloNWdLSlhiekdcbk5xcmJ0eGYrZGh3TGFzUXZjSDk3aEQvMnd5bktLYlc5Vld4VmYydkdCZVpTZEZSWnY5TC9EdjBPb0VQVllPM1BcblhUOWUxRlEvbzFXS3E3Q1ZHeWw0dnpPcFJsNzhCYlVvMDZtUzFDdXU1L29xSDZPZDJBNHdMUGd6aDdIemlReitcblZOdjFnaDZiRC9ROGo0Q0pINGhCTmRuTVlQMzlxM2gxd1hxRDUvQytrVDRTR0UvbFFOTVFQZStwYjNEa1NNc3FcbmhJZUZYL1JKbURGMWlDZWJ5TE9TMVBVK1NJRC80bVBjU0NaUHJVcGpHWEMrQjNUTG84aXpNODhSck9BNy9UeFZcbnAyWFNHR214UlQ1ZzNPUitpalYzYmhzVk5hYU5WMFBNWGtGMmc3SHR0UUtCZ1FEai9RY0luUktEeldTc2xhRVNcblBvdDhqdFB6dW1pemRINmFJRlp1akdmeGRETm1FSTlURjFWS2NESXh4R0JJWVBKbWc4ZjkxaXVtbDNzNVNiZkxcbnZmajBOd0pick1rNnVoMWRramJQTnVBd2xIbk5XejZZVjFlODcyaWVCRFZCOExFdjJIVWhwa04yZzIwNVFLR0hcbkFWYXpJNVcybGVlcmVkUGNEam91T2FOamd3S0JnUURMMDZOMVRTalFwVGtaRlJvS082V0JISTY4Z3A2WDNla2JcbkkxYk4yRXc0RTZ0eFR1MExxcEM4dEg3RVZZNFU4d21TWkxQVUtQdjRTTU5jY3Q3WmJFMFlrVEJDdkVtaVZoU05cbjhhS1hOcWlWRks0ZmdlSlczekU1Vng2T0VWL2x2d3FZWUxNeEJHa0lkdGRadExocFhvV1EwMjZONzIrM3RBSjdcbjEzcWhtQU5sYndLQmdFcDh6T04vamlFSjVpNk01SWMxY0JWT0JPbklxWlNZSnhUc0k5RVNocE5ZeDhJOC90YkNcbjlOYlJPVlVSTi9QdDJNU3RvWlhKZDVHQ1JIdy9IWkd2aTdzZWplS3QzVUVXdGFsd3IvK2JpanZWQnNhVlhTb2dcbnYwVzNZcExlQlJoNkx5bldxczVIcUJyOGJaOGJBcXM5UUxwZWtmZUptcHRudmxSVFFhY0FwZVZKQW9HQURPajNcbnhucy9wWStCZ1ZRejFRZ1lJSWhsaGcwajdHeVMwalEzMEV2dDcvTlcvWk5KTWw3NFVldUF5QUMvUWhadXVjWUZcbkdlQUtyWncyTzRuUEVhaHBiYS9zaFoyVmNHSFJaWGd6bXk1TUdUMDVGaWZNNVVHM3hYRCtMM05zUm9vR0tzYWRcbk12S2JrSHl1Z1RFUUtTUmlnMXpRK001OG5mOFoxU3c5eVRSdXFxTUNnWUJWaFJFMXIvdXM1RXVTNWZ0ZTlGRnhcbkRKdVV6WXNyTnFNTk9zU2U0aGk2OVAweXU3Q3ExSkdsNkZveU9RaUpCTU51U1ZWZlJ6amNlZUhDRjNYY2dsbnhcbmFiSWVUZzBhZ1ViNTRlOTBWdHRpM1lKNUp4WFBJRW9adFhPbEdEWkRzUkVJVVc4a0RaQkljaEtONjFBTTcyempcbmV0Y2t5dS9ZVDZYTzQyODIzckVOblE9PVxuLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLVxuIiwgImNsaWVudF9lbWFpbCI6ICJidWloaWVuMjI0QHByb3BhbmUtYXRyaXVtLTMyNjQyMy5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIsICJjbGllbnRfaWQiOiAiMTExMzI4MzQ3MzI0OTg2MjA0MTYxIiwgImF1dGhfdXJpIjogImh0dHBzOi8vYWNjb3VudHMuZ29vZ2xlLmNvbS9vL29hdXRoMi9hdXRoIiwgInRva2VuX3VyaSI6ICJodHRwczovL29hdXRoMi5nb29nbGVhcGlzLmNvbS90b2tlbiIsICJhdXRoX3Byb3ZpZGVyX3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3YxL2NlcnRzIiwgImNsaWVudF94NTA5X2NlcnRfdXJsIjogImh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL3JvYm90L3YxL21ldGFkYXRhL3g1MDkvYnVpaGllbjIyNCU0MHByb3BhbmUtYXRyaXVtLTMyNjQyMy5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbSIgfQ==        filename: "archive.zip"
           folderId: 1WSbbk66UrylI0s3-Y5TVjqcahXFUpa9f
           name: "$Zip_name" # optional string
           overwrite: "true" # optional boolean
  
